<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.67.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>YAML | CUE</title><meta property="og:title" content="YAML" />
<meta property="og:description" content="How CUE integrates with the YAML data-serialization standard." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cuelang.org/docs/integrations/yaml/" />
<meta property="article:modified_time" content="2021-01-04T15:25:38+00:00" /><meta property="og:site_name" content="CUE" />
<meta itemprop="name" content="YAML">
<meta itemprop="description" content="How CUE integrates with the YAML data-serialization standard.">
<meta itemprop="dateModified" content="2021-01-04T15:25:38&#43;00:00" />
<meta itemprop="wordCount" content="479">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="YAML"/>
<meta name="twitter:description" content="How CUE integrates with the YAML data-serialization standard."/>





<link rel="preload" href="/scss/main.min.f56d687752891909019b7a425ae3aefe3e6508a54e92b7a1dc91a12c9a948211.css" as="style">
<link href="/scss/main.min.f56d687752891909019b7a425ae3aefe3e6508a54e92b7a1dc91a12c9a948211.css" rel="stylesheet" integrity="">


<link rel="stylesheet" type="text/css" href=https://cuelang.org/css/asciinema-player.css />
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

    <title>YAML | CUE</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">CUE</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs/" ><span>Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://github.com/cuelang/cue" target="_blank" ><span>GitHub</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<input type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off">

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/about/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">About</a>
  </li>
  <ul>
    <li class="collapse " id="docsabout">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/install/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="docsinstall">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/usecases/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Use Cases</a>
  </li>
  <ul>
    <li class="collapse " id="docsusecases">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesconfiguration" href="/docs/usecases/configuration/">Configuration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesvalidation" href="/docs/usecases/validation/">Data Validation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesdatadef" href="/docs/usecases/datadef/">Schema Definition</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesgenerate" href="/docs/usecases/generate/">Code Generation and Extraction</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesquery" href="/docs/usecases/query/">Querying</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesscripting" href="/docs/usecases/scripting/">Scripting</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/integrations/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Integrations</a>
  </li>
  <ul>
    <li class="collapse show" id="docsintegrations">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintegrationsjson" href="/docs/integrations/json/">JSON</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsintegrationsyaml" href="/docs/integrations/yaml/">YAML</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintegrationsgo" href="/docs/integrations/go/">Go</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintegrationsprotobuf" href="/docs/integrations/protobuf/">Protobuf</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintegrationsopenapi" href="/docs/integrations/openapi/">OpenAPI and CRDs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintegrationsk8s" href="/docs/integrations/k8s/">Kubernetes</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docsconcepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptslogic" href="/docs/concepts/logic/">The Logic of CUE</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/concepts/packages/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Modules, Packages, and Instances</a>
  </li>
  <ul>
    <li class="collapse " id="docsconceptspackages">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse " id="docstutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstutorialskubernetes" href="/docs/tutorials/kubernetes/"></a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/references/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">References</a>
  </li>
  <ul>
    <li class="collapse " id="docsreferences">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencesspec" href="/docs/references/spec/">Language Specification</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/cuelang/cuelang.org/edit/master/content/en/docs/integrations/yaml.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cuelang/cuelang.org/issues/new?title=YAML" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/cuelang/cue/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#intro">Intro</a></li>
    <li><a href="#command-line-tool">Command line tool</a>
      <ul>
        <li><a href="#validate-yaml-files">Validate YAML files</a></li>
        <li><a href="#import-yaml">Import YAML</a></li>
      </ul>
    </li>
    <li><a href="#yaml-in-cue">YAML in CUE</a>
      <ul>
        <li><a href="#validate">Validate</a></li>
        <li><a href="#create">Create</a></li>
        <li><a href="#parse">Parse</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://cuelang.org/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://cuelang.org/docs/integrations/">Integrations</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://cuelang.org/docs/integrations/yaml/">YAML</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>YAML</h1>
	<div class="lead">How CUE integrates with the YAML data-serialization standard.</div>
	<h2 id="intro">Intro</h2>
<p>Unlike with JSON, CUE is not a superset of YAML.
One of the design goals of CUE was to be easily machine generatable and
modifiable.
The sensitivity to indentation and the lexical obscurity of the typing of
tokens make YAML too bug prone for this purpose.</p>
<p>Consider this piece of yaml:</p>
<pre><code class="language-none" data-lang="none">phrases:
  quote1:
    lang: en
    text: Never regret anything that made you smile.
    attribution: Mark Twain

  proverb:
    lang: no
    text: Stemmen som sier at du ikke klarer det, lyver.</code></pre>
<p>See the problem?
The language for the Norwegian proverb is set to <code>no</code>, which is interpreted
as <code>false</code> in YAML.</p>
<p>Luckily, CUE can help catch those pesky YAML quirks quickly and swiftly.</p>
<h2 id="command-line-tool">Command line tool</h2>
<h3 id="validate-yaml-files">Validate YAML files</h3>
<p>The <code>vet</code> command of the <code>cue</code> command line tool can validate
YAML files using a CUE schema.</p>
<p>Consider these two files:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8f5902;font-style:italic"># ranges.yaml</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">min</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">max</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span>---<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">min</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">max</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5</span></code></pre></div>
<pre><code class="language-cue" data-lang="cue">// check.cue
min?: *0 | number    // 0 if undefined
max?: number &amp; &gt;min  // must be strictly greater than min if defined.</code></pre>
<p>The <code>cue vet</code> command can verify that the values in <code>ranges.yaml</code>
are correct by just mentioning the two files on the command line.</p>
<pre><code class="language-none" data-lang="none">$ cue vet ranges.yaml check.cue
max: invalid value 5 (out of bound &gt;10):
    ./check.cue:2:16
    ./ranges.yaml:5:7</code></pre>
<h3 id="import-yaml">Import YAML</h3>
<p>The <code>import</code> command of the <code>cue</code> command line tool can convert YAML files
into CUE.
It can even embedded structured YAML and JSON and convert those recursively.</p>
<h2 id="yaml-in-cue">YAML in CUE</h2>
<p>The <code>encoding/yaml</code> builtin package provides various builtins to
parse, generate, or validate YAML from within CUE.</p>
<h3 id="validate">Validate</h3>
<p>If the YAML string from our introduction were embedded within a CUE file,
the fix would be the following.</p>
<pre><code class="language-none" data-lang="none">// dim.cue
import &#34;encoding/yaml&#34;

// Phrases defines a schema for a valid phrase.
#Phrases: {
    phrases: [string]: #Phrase

    #Phrase: {
        lang:         #LanguageTag
        text:         !=&#34;&#34;
        attribution?: !=&#34;&#34; // must be non-empty when specified

    }
    #LanguageTag: =~&#34;^[a-zA-Z0-9-_]{2,}$&#34;
}

// phrases is a YAML string with a field phrases that is a map of Phrase
// objects.
phrases: yaml.Validate(#Phrases)

phrases: &#34;&#34;&#34;
    phrases:
      # A quote from Mark Twain.
      quote1:
        lang: en
        text: Never regret anything that made you smile.
        attribution: Mark Twain

      # A Norwegian proverb.
      proverb:
        lang: no
        text: Stemmen som sier at du ikke klarer det, lyver.
    &#34;&#34;&#34;</code></pre>
<p>By defining a schema (called definition in CUE) for the allowed values of a YAML
string, we were able to catch the error before it made it into production.</p>
<pre><code class="language-none" data-lang="none">$ cue vet dim.cue
phrases: error in call to encoding/yaml.Validate: conflicting values false and
LanguageTag (mismatched types bool and string):
    ./dim.cue:18:10</code></pre>
<h3 id="create">Create</h3>
<p>The builtin <code>encoding/yaml.Marshal</code> generates YAML from within CUE.</p>



<a id="td-block-6" class="td-offset-anchor"></a>
<section class="row td-box td-box--white td-box--gradient td-box--height-auto">
    <div class="col">
<pre><code class="language-none" data-lang="none">import &#34;encoding/yaml&#34;
<p>configMap: data: &quot;point.yaml&quot;:
yaml.Marshal({
x: 4.5
y: 2.34
})</code></pre></p>
</div>
<div class="col">
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;configMap&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;data&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">&#34;point.yaml&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;x: 4.5\n\&#34;y\&#34;: 2.34\n&#34;</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
</div>

</section>

<h3 id="parse">Parse</h3>
<p>The inverse is also possible



<a id="td-block-7" class="td-offset-anchor"></a>
<section class="row td-box td-box--white td-box--gradient td-box--height-auto">
    <div class="col">
<pre><code class="language-none" data-lang="none">import &#34;encoding/yaml&#34;
<p>data: &quot;&quot;&quot;
x: 4.5
y: 2.34
&quot;&quot;&quot;
point: yaml.Unmarshal(data)</code></pre></p>
</div>
<div class="col">
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;data&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;x: 4.5\ny: 2.34&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;point&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;x&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">4.5</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;y&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2.34</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span></code></pre></div>
</div>

</section>
</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified January 4, 2021: <a  href="https://github.com/cuelang/cuelang.org/commit/6b0c7df7dffcbdd86d32bedd43f9f094f640e38d">integrations/yaml: fix reference from checks.cue to check.cue (#120) (6b0c7df)</a>
</div>
</div>


          </main>
        </div>
      </div>
      

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code' ],
    ignoreClass: "mermaid",
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>


<link href="https://cuelang.org/mermaid/mermaid.css" rel="stylesheet" />
<script src="https://cuelang.org/mermaid/mermaid.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
        flowchart: {
            curve: 'basis'
        }
    });
</script>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/js/main.min.2187fca64cce5b93625c3b6ebbc286d5a6026eaa944cef7319ed98d12dd39c91.js" integrity="sha256-IYf8pkzOW5NiXDtuu8KG1aYCbqqUTO9zGe2Y0S3TnJE=" crossorigin="anonymous"></script>

<script src=https://cuelang.org/js/asciinema-player.js></script>

  </body>
</html>